<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CBAA - Plan</title>
    <link rel="stylesheet" href="sidebar.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="plan.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="dashboard-page-body">
    <div class="dashboard-container" style="display: flex; min-height: 100vh;">
        <!-- Sidebar -->
        <div class="sidebar-container">
            <!-- Sidebar HTML will be loaded here -->
        </div>
        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header" style="position:sticky;top:0;z-index:100;background:var(--card-bg);box-shadow:0 2px 8px rgba(0,0,0,0.03);">
                <div class="breadcrumbs">
                    <a href="dashboard.html">CB-PHAA</a>
                    <img src="icons/chevron-right.svg" alt=">" class="breadcrumb-separator">
                    <span>Plan</span>
                </div>
                <div class="cart-header" id="cart-header" style="display:flex;align-items:center;gap:1rem;position:absolute;right:2rem;top:1.5rem;">
                    <button id="cart-btn" style="background:none;border:none;cursor:pointer;position:relative;">
                        <img src="icons/cart.svg" alt="Cart" style="width:32px;height:32px;">
                        <span id="cart-count" style="position:absolute;top:-8px;right:-8px;background:#4A4DE6;color:#fff;border-radius:50%;padding:2px 7px;font-size:12px;min-width:20px;text-align:center;">0</span>
                    </button>
                    <span id="cart-summary" style="font-weight:500;color:var(--primary-color);font-size:1.1rem;">$0.00</span>
                </div>
            </header>
            <section class="plan-overview">
                <div class="current-plan">
                    <div class="plan-header">
                        <h2><img src="icons/plan.svg" alt=""> Current Plan:</h2>
                        <span class="popular-badge">Popular</span>
                    </div>
                    <p class="billing-info">Next billing: 2024-02-15 â€¢ $30/month</p>
                    <div class="citations-used">
                        <div class="citations-header">
                            <span>Citations Used</span>
                            <span>847 / 1200</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress" style="width: 70.58%;"></div>
                        </div>
                    </div>
                    <div class="plan-stats">
                        <div class="stat">
                            <span class="stat-value">847</span>
                            <span class="stat-label">Used This Month</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">353</span>
                            <span class="stat-label">Remaining</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">71%</span>
                            <span class="stat-label">Usage</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="plan-selection">
                <div class="plan-tabs">
                    <button class="tab-btn active" id="available-plans-tab">Available Plans</button>
                    <button class="tab-btn" id="billing-history-tab">Billing History</button>
                    <button class="tab-btn">Payment Method</button>
                </div>
                <div class="plan-cards" id="plan-cards-section">
                    <div class="plan-card">
                        <img src="icons/profile.svg" alt="" class="plan-icon">
                        <h3>Starter</h3>
                        <p class="price"><span>$40</span> per month</p>
                        <p class="citations">1000 Citations</p>
                        <ul class="features">
                            <li><img src="icons/check-circle.svg" alt=""> 1000 Citations</li>
                            <li><img src="icons/check-circle.svg" alt=""> Citation Autofill</li>
                        </ul>
                        <button class="btn btn-downgrade">Downgrade</button>
                    </div>
                    <div class="plan-card professional current">
                        <div class="most-popular-badge">Most Popular</div>
                        <div class="current-plan-label">Current Plan</div>
                        <img src="icons/plan.svg" alt="" class="plan-icon">
                        <h3>Professional</h3>
                        <p class="price"><span>$50</span> per month</p>
                        <p class="citations">1,700 Citations</p>
                        <ul class="features">
                            <li><img src="icons/check-circle.svg" alt=""> 1,700 Citations</li>
                            <li><img src="icons/check-circle.svg" alt=""> Citation Autofill</li>

                        </ul>
                        <button class="btn btn-current">Current Plan</button>
                    </div>
                    <div class="plan-card business">
                         <img src="icons/chart-bar.svg" alt="" class="plan-icon">
                        <h3>Business</h3>
                        <p class="price"><span>$100</span> per month</p>
                        <p class="citations">3,000 Citations</p>
                        <ul class="features">
                            <li><img src="icons/check-circle.svg" alt=""> 3,000 Citations per month</li>
                            <li><img src="icons/check-circle.svg" alt=""> Citation Autofill</li>
                            <li><img src="icons/check-circle.svg" alt=""> Listing Analysis</li>

                        </ul>
                        <button class="btn btn-upgrade">Upgrade</button>
                    </div>
                    <div class="plan-card">
                        <img src="icons/campaign.svg" alt="" class="plan-icon">
                        <h3>Enterprise</h3>
                        <p class="price"><span>$250</span> per month</p>
                        <p class="citations">Unlimited Citations</p>
                        <ul class="features">
                            <li><img src="icons/check-circle.svg" alt=""> Unlimited Citations</li>
                            <li><img src="icons/check-circle.svg" alt=""> Citation Autofill</li>
                            <li><img src="icons/check-circle.svg" alt=""> Listing Analysis</li>
                            <li><img src="icons/check-circle.svg" alt=""> Category Sniper</li>
                        </ul>
                        <button class="btn btn-upgrade">Upgrade</button>
                    </div>
                </div>
                <div class="billing-history-section" id="billing-history-section" style="display:none;">
                    <div class="billing-history-header">
                        <h3>Billing History</h3>
                        <div class="billing-stats">
                            <div class="stat-card">
                                <span class="stat-label">Total Transactions</span>
                                <span class="stat-value" id="total-transactions">0</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Total Spent</span>
                                <span class="stat-value" id="total-spent">$0.00</span>
                            </div>
                        </div>
                    </div>
                    <div class="billing-history-table-container">
                        <table class="billing-history-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Plan(s)</th>
                                    <th>Total Payment</th>
                                    <th>Status</th>
                                    <th>Approved</th>
                                </tr>
                            </thead>
                            <tbody id="billing-history-table">
                                <!-- Billing history rows will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section class="plan-comparison">
                <h2>Plan Comparison</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Starter</th>
                            <th>Professional</th>
                            <th>Business</th>
                            <th>Enterprise</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Monthly Citations</td>
                            <td>1000</td>
                            <td>1,700</td>
                            <td>3,000</td>
                            <td>Unlimited</td>
                        </tr>
                        <tr>
                            <td>Citation Autofill</td>
                            <td><img src="icons/check-circle.svg" alt="check"></td>
                            <td><img src="icons/check-circle.svg" alt="check"></td>
                            <td><img src="icons/check-circle.svg" alt="check"></td>
                            <td><img src="icons/check-circle.svg" alt="check"></td>
                        </tr>
                        <tr>
                            <td>Listing Analysis</td>
                            <td>â€”</td>
                            <td>â€”</td>
                            <td>â€”</td>
                            <td><img src="icons/check-circle.svg" alt="check"></td>
                        </tr>
                        <tr>
                            <td>Category Sniper/td>
                            <td>â€”</td>
                            <td>â€”</td>
                            <td><img src="icons/check-circle.svg" alt="check"></td>
                            <td><img src="icons/check-circle.svg" alt="check"></td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </main>
    </div>
    <!-- Checkout Panel (hidden by default) -->
    <div id="checkout-panel" class="checkout-panel" style="display:none;position:fixed;top:0;right:0;width:400px;max-width:100vw;height:100vh;background:var(--card-bg);box-shadow:-4px 0 24px rgba(0,0,0,0.08);z-index:2000;padding:2rem;overflow-y:auto;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;">
            <h2 style="margin:0;font-size:1.3rem;">Checkout</h2>
            <button id="close-checkout" style="background:none;border:none;font-size:2rem;line-height:1;cursor:pointer;">&times;</button>
        </div>
        <div id="checkout-list"></div>
        <div style="margin-top:2rem;border-top:1px solid var(--border-color);padding-top:1.5rem;">
            <div style="display:flex;justify-content:space-between;font-size:1.1rem;margin-bottom:0.5rem;">
                <span>Total Citations:</span>
                <span id="checkout-total-citations">0</span>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:1.1rem;margin-bottom:1.5rem;">
                <span>Total Payment:</span>
                <span id="checkout-total-payment" style="font-weight:600;color:var(--primary-color);">$0.00</span>
            </div>
            <button id="confirm-checkout" class="btn btn-primary" style="width:100%;font-size:1.1rem;">Confirm & Pay</button>
        </div>
    </div>
    <script>
    // Dynamically load the sidebar HTML for consistency
    fetch('sidebar-component.html')
      .then(res => res.text())
      .then(html => {
        document.querySelector('.sidebar-container').innerHTML = html;
        // Highlight the Plan nav item
        document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
        const planNav = document.querySelector('.nav-item[data-page="plan"]');
        if (planNav) planNav.classList.add('active');
        if (window.updateUserInfo) window.updateUserInfo();
      });
    </script>
    <script type="module" src="sidebar-centralized.js"></script>
    <script type="module" src="plan.js"></script>
</body>
</html> 